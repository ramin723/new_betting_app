# مدل‌های سیستم شرط‌بندی

این پوشه شامل تمام مدل‌های مورد نیاز برای سیستم شرط‌بندی است. هر مدل با استفاده از Sequelize و TypeScript پیاده‌سازی شده است.

## ساختار مدل‌ها

### User
مدل کاربران سیستم که شامل اطلاعات اصلی کاربر، نقش‌ها و اطلاعات کیف پول است.

### Event
مدل رویدادها که شامل اطلاعات اصلی رویداد، وضعیت، مهلت شرط‌بندی و سایر جزئیات است.

### Bet
مدل شرط‌ها که شامل اطلاعات شرط‌های کاربران، مبلغ و وضعیت آنها است.

### WalletHistory
مدل تاریخچه تراکنش‌های کیف پول که شامل تمام تراکنش‌های ورودی و خروجی است.

### Tag
مدل برچسب‌ها که برای دسته‌بندی و فیلتر کردن رویدادها استفاده می‌شود.

### EventTemplate
مدل قالب‌های رویداد که برای ایجاد سریع رویدادهای مشابه استفاده می‌شود.

### Option
مدل گزینه‌های شرط‌بندی که شامل اطلاعات گزینه‌ها، ضرایب و وضعیت برنده شدن است.

## روابط بین مدل‌ها

- User -> Event (یک به چند)
- User -> Bet (یک به چند)
- User -> WalletHistory (یک به چند)
- Event -> Option (یک به چند)
- Event -> Tag (چند به چند)
- Event -> EventTemplate (چند به یک)
- Bet -> Option (چند به یک)

## نکات مهم

1. همه مدل‌ها از TypeScript استفاده می‌کنند و دارای تایپ‌های قوی هستند.
2. اعتبارسنجی‌های لازم برای فیلدها پیاده‌سازی شده‌اند.
3. ایندکس‌های مناسب برای بهبود عملکرد کوئری‌ها اضافه شده‌اند.
4. روابط بین مدل‌ها به درستی تعریف شده‌اند.

## نحوه استفاده

برای استفاده از مدل‌ها، ابتدا باید آنها را از فایل `index.ts` صادر کنید:

```typescript
import { User, Event, Bet, WalletHistory, Tag, EventTemplate, Option } from './models';
```

سپس می‌توانید از مدل‌ها برای عملیات‌های مختلف استفاده کنید:

```typescript
// مثال دریافت یک کاربر
const user = await User.findByPk(userId);

// مثال دریافت رویدادهای یک کاربر
const events = await Event.findAll({
  where: { creator_id: userId }
});

// مثال دریافت شرط‌های یک رویداد
const bets = await Bet.findAll({
  where: { event_id: eventId }
});
```

## تست‌ها

برای اجرای تست‌های مدل‌ها:

```bash
npm run test:models
```

## مستندات بیشتر

برای اطلاعات بیشتر درباره هر مدل، به فایل‌های مربوطه در پوشه `types` مراجعه کنید. 